<!DOCTYPE html>
<html lang="en">
<head>

    {% include 'material.html' %}

    <meta charset="UTF-8">
    <title>Comic Scraper</title>
</head>
<body>
    
        
          <div class="text-field-container">
              <div class="mdc-text-field text-field mdc-text-field--outlined mdc-text-field--no-label">
                  <input type="text" id="comicurl" class="mdc-text-field__input" aria-label="Text field aria label" aria-describedby="comicurl-helper-text">
                  <div class="mdc-notched-outline mdc-notched-outline--no-label">
                      <div class="mdc-notched-outline__leading"></div>
                      <div class="mdc-notched-outline__trailing"></div>
                    </div>
                </div>
                <div class="mdc-text-field-helper-line">
                    <p class="mdc-text-field-helper-text mdc-text-field-helper-text--persistent mdc-text-field-helper-text--validation-msg" id="comicurl-helper-text">
                        Comic URL
                    </p>
                </div>
            </div>

        <br/> 
        <p id="titlebox" name="titlebox">Title:</p>
        <p id="singleissuebox" name="singleissuebox">Single Issue Provided:</p>

        <div class="mdc-form-field">
            <div class="mdc-radio">
              <input class="mdc-radio__native-control" type="radio" id="radio-1" name="radios" checked>
              <div class="mdc-radio__background">
                <div class="mdc-radio__outer-circle"></div>
                <div class="mdc-radio__inner-circle"></div>
              </div>
              <div class="mdc-radio__ripple"></div>
              <div class="mdc-radio__focus-ring"></div>
            </div>
            <label for="radio-1">Radio 1</label>
          </div>
          <br/>

        <button class="mdc-button mdc-button--raised">  <span class="mdc-button__ripple"></span> Submit </button>


<script type="text/javascript">

let urlbox = document.getElementById("comicurl");
let titlebox = document.getElementById("titlebox");
let url = "{{ url_for('comicInfo') }}";

urlbox.addEventListener('change', (e) => {

    let body = {"url": urlbox.value};

    let requestOptions = {
        body: JSON.stringify(body),
        headers: {
            "Content-Type": "application/json"
        },
        method: "POST"
    }

    fetch(url, requestOptions).then(
        function(response) {
            return response.json();
    }).then(function(result) {
        console.log("result:" ,result)
        titlebox.innerHTML = "Title: " + result['title']
        singleissuebox.innerHTML = "Single Issue Provided: " + result['singleissue']
    }).catch(function(err) {
        console.log(err);
    });

})

</script>

</body>
</html>